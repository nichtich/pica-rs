<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>count - pica-rs</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../custom.css">

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../index.html">Einführung</a></li><li class="chapter-item expanded affix "><li class="part-title">Benutzerhandbuch</li><li class="chapter-item expanded "><a href="../../guide/installation.html"><strong aria-hidden="true">1.</strong> Installation</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.</strong> Kommandos</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../guide/cmds/cat.html"><strong aria-hidden="true">2.1.</strong> cat</a></li><li class="chapter-item expanded "><a href="../../guide/cmds/completions.html"><strong aria-hidden="true">2.2.</strong> completions</a></li><li class="chapter-item expanded "><a href="../../guide/cmds/count.html" class="active"><strong aria-hidden="true">2.3.</strong> count</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.4.</strong> filter</div></li><li class="chapter-item expanded "><a href="../../guide/cmds/frequency.html"><strong aria-hidden="true">2.5.</strong> frequency</a></li><li class="chapter-item expanded "><a href="../../guide/cmds/invalid.html"><strong aria-hidden="true">2.6.</strong> invalid</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.7.</strong> partition</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.8.</strong> print</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.9.</strong> sample</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.10.</strong> select</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.11.</strong> slice</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.12.</strong> split</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.13.</strong> json</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.14.</strong> xml</div></li></ol></li><li class="chapter-item expanded "><li class="part-title">Tutorials</li><li class="chapter-item expanded "><a href="../../tutorials/beginner-tutorial.html"><strong aria-hidden="true">3.</strong> Beginner Tutorial</a></li><li class="chapter-item expanded "><a href="../../tutorials/rmarkdown/rmarkdown.html"><strong aria-hidden="true">4.</strong> Verwendung in RMarkdown</a></li><li class="chapter-item expanded affix "><li class="part-title">Entwicklerdokumentation</li><li class="chapter-item expanded "><a href="../../referenz/index.html"><strong aria-hidden="true">5.</strong> Referenz</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../referenz/matcher.html"><strong aria-hidden="true">5.1.</strong> Matcher</a></li><li class="chapter-item expanded "><a href="../../referenz/occurrence.html"><strong aria-hidden="true">5.2.</strong> Occurrence</a></li><li class="chapter-item expanded "><a href="../../referenz/subfield.html"><strong aria-hidden="true">5.3.</strong> Subfield</a></li><li class="chapter-item expanded "><a href="../../referenz/tag.html"><strong aria-hidden="true">5.4.</strong> Tag</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">pica-rs</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="count"><a class="header" href="#count">count</a></h1>
<p>Mithilfe des <code>count</code>-Kommandos lässt sich die Anzahl an Datensätzen (<em>records</em>), Feldern (<em>fields</em>)
sowie Unterfeldern (<em>subfields</em>) ermitteln.</p>
<h2 id="beschreibung"><a class="header" href="#beschreibung">Beschreibung</a></h2>
<p>Soll die Anzahl der Datensätze und deren Felder sowie Unterfelder ermittelt werden, kann dies mit
dem <code>count</code>-Kommando erfolgen. Ungültige Datensätze können mit dem Flag <code>--skip-invalid</code> (bzw.
<code>-s</code>) übersprungen werden. Im folgenden Beispiel werden drei Dateien eingelesen und eine
Zusammenfassung auf der Konsole ausgegeben:</p>
<pre><code class="language-bash">$ pica count -s 004732650.dat.gz 1004916019.dat.gz 119232022.dat.gz
records: 3
fields: 122
subfields: 332
</code></pre>
<h3 id="ausgabe-im-csvtsv-format"><a class="header" href="#ausgabe-im-csvtsv-format">Ausgabe im CSV/TSV-Format</a></h3>
<p>Die Ausgabe des Kommandos kann auch im Format <em>CSV</em> bzw. <em>TSV</em> erfolgen, was die Weiterverarbeitung
in anderen Programmen erleichtert. Die Ausgabe der Kopfzeile lässt sich mit dem Flag <code>--no-header</code>
ausschalten.</p>
<pre><code class="language-bash">$ pica count -s --csv tests/data/dump.dat.gz
records,fields,subfields
7,247,549

$ pica count -s --tsv tests/data/dump.dat.gz
records fields  subfields
7       247     549

$ pica count -s --csv --no-header tests/data/dump.dat.gz
records,fields,subfields
7,247,549
</code></pre>
<h3 id="ausgabe-in-eine-datei"><a class="header" href="#ausgabe-in-eine-datei">Ausgabe in eine Datei</a></h3>
<p>Die Ausgabe des Kommandos wird standardmäßig auf der Konsole ausgegeben. Diese kann mit der Option
<code>--output</code> (bzw. <code>-o</code>) in eine Datei umgeleitet werden. Soll diese Datei eine neue Zeile erhalten
und nicht bei jedem Aufruf überschrieben werden, kann dies mit dem Flag <code>--append</code> erzielt werden.</p>
<pre><code class="language-bash">$ pica count -s --csv -o count.csv tests/data/dump.dat.gz
$ cat count.csv
records,fields,subfields
7,247,549

$ pica count -s --csv --append -o count.csv tests/data/dump.dat.gz
$ cat count.csv
records,fields,subfields
7,247,549
7,247,549
</code></pre>
<h3 id="ausgabe-von-einzelwerten"><a class="header" href="#ausgabe-von-einzelwerten">Ausgabe von Einzelwerten</a></h3>
<p>Soll entweder die Anzahl von Datensätzen, Feldern oder Unterfeldern ausgegeben werden, kann dies
mit den Flags <code>--records</code>, <code>--fields</code> bzw. <code>--subfields</code> erfolgen. Diese Flags schließen sich
gegenseitig aus und können nicht mit den Flags <code>--csv</code>, <code>--tsv</code> und <code>--no-header</code> kombiniert
werden.</p>
<pre><code class="language-bash">$ pica count -s --records tests/data/dump.dat.gz
7

$ pica count -s --fields tests/data/dump.dat.gz
247

$ pica count -s --subfields tests/data/dump.dat.gz
549
</code></pre>
<h3 id="anwendungsbeispiel"><a class="header" href="#anwendungsbeispiel">Anwendungsbeispiel</a></h3>
<p>Soll die Veränderung (Anzahl Datensätze, Felder, Unterfelder) eines Abzugs über die Zeit verfolgt
werden, könnte dies wie folgt erreicht werden:</p>
<pre><code class="language-bash">$ echo &quot;date,records,fields,subfields&quot; &gt; count.csv # Kopfzeile
$ pica count -s dump_20220222.dat.gz --append -o count.csv # Initialer Aufruf
$ pica count -s dump_20220223.dat.gz --append -o count.csv # Aufruf nach x Tagen

$ cat count.csv
$ records,fields,subfields
7,247,549
9,347,1022
</code></pre>
<p>Soll auch das aktuelle Datum vor die Zeile geschrieben werden, könnten die Befehle wie folgt
aussehen:</p>
<pre><code class="language-bash"># Schreiben der Kopfzeile
$ echo &quot;date,records,fields,subfields&quot; &gt; count.csv

# Aufruf am 22.02.2022
$ pica count -s --no-header --csv dump_20220222.dat.gz | \
    xargs -d&quot;\n&quot; -I {} date +&quot;%Y-%m-%d,{}&quot; &gt;&gt; count.csv

# Aufruf am 23.02.2022
$ pica count -s --no-header --csv dump_20220223.dat.gz | \
    xargs -d&quot;\n&quot; -I {} date +&quot;%Y-%m-%d,{}&quot; &gt;&gt; count.csv

$ cat count.csv
$ date,records,fields,subfields
2022-02-22,7,247,549
2022-02-23,9,347,1022
</code></pre>
<h3 id="alternativen"><a class="header" href="#alternativen">Alternativen</a></h3>
<p>Da Datensätze zeilenweise gespeichert/ausgegeben werden, kann auch das Unix-Kommand <a href="https://man7.org/linux/man-pages/man1/wc.1.html"><em>wc</em></a> verwendet werden,
um die Anzahl der Datensätze zu bestimmen. Es muss aber vorher sichergestellt sein, dass nur gültige Datensätze
in der Datei (oder der Standardeingabe) sind. Die folgenden Kommandos sind äquivalent:</p>
<pre><code class="language-bash">$ pica count -s --records dump.dat
7

$ pica cat -s dump.dat | wc -l
7
</code></pre>
<p>Eine weitere Alternative ist das Perl-Tool <a href="https://metacpan.org/dist/PICA-Data/view/script/picadata"><em>picadata</em></a>. Es kann wie folgt genutzt werden (eine genaue
Beschreibung des Tools befindet sich in der Dokumentation):</p>
<pre><code class="language-bash">$ pica filter &quot;045H?&quot; ddc.pica | pica count
719229 records
1723512 fields
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../guide/cmds/completions.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../guide/cmds/frequency.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../guide/cmds/completions.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../guide/cmds/frequency.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
